(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{1893:(e,r,t)=>{Promise.resolve().then(t.bind(t,9601))},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},7674:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,O:()=>o});var s=t(5155),a=t(2115),u=t(9012);let n=(0,a.createContext)();function o(e){let{children:r}=e,[t,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[i,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await u.F.get("/auth/me");o(e.data.user),d(!0)}catch(e){o(null),d(!1)}finally{c(!1)}},m=async e=>{o(e),d(!0)},p=async()=>{try{await u.F.post("/auth/logout"),o(null),d(!1)}catch(e){console.error("Logout error:",e)}};return(0,s.jsx)(n.Provider,{value:{user:t,isAuthenticated:i,isLoading:l,login:m,logout:p,checkAuthStatus:h},children:r})}let l=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},9012:(e,r,t)=>{"use strict";t.d(r,{F:()=>s});let s=t(3464).A.create({baseURL:"https://parsswim-backend-production.up.railway.app",withCredentials:!0,timeout:15e3});s.interceptors.request.use(e=>e,e=>(console.error("\uD83D\uDD25 Request Error:",e),Promise.reject(e))),s.interceptors.response.use(e=>e,e=>{var r,t,s;return console.error("API Error:",(null==(r=e.response)?void 0:r.data)||e.message),(null==(t=e.response)?void 0:t.status)===401&&console.log("Authentication required"),(null==(s=e.response)?void 0:s.status)>=500&&console.error("Server error - please try again later"),Promise.reject(e)})},9601:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(5155),a=t(7674),u=t(5695),n=t(2115);function o(e){let{children:r}=e,{isAuthenticated:t,isLoading:o}=(0,a.A)(),l=(0,u.useRouter)();return((0,n.useEffect)(()=>{!o&&t&&l.push("/dashboard")},[t,o,l]),o)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"در حال بررسی احراز هویت..."})]})}):t?null:(0,s.jsx)(s.Fragment,{children:r})}}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=1893)),_N_E=e.O()}]);