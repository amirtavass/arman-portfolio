(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{3974:(t,e,s)=>{"use strict";s.d(e,{L:()=>u,v:()=>i});var r=s(5041),n=s(9012),a=s(7674);let i=()=>{let{login:t}=(0,a.A)();return(0,r.n)({mutationFn:async t=>{let{name:e,password:s}=t;return(await n.F.post("/auth/login",{name:e,password:s})).data},onSuccess:e=>{t(e.user)}})},u=()=>{let{login:t}=(0,a.A)();return(0,r.n)({mutationFn:async t=>(await n.F.post("/auth/register",{...t,balance:0,swimmingType:"normal",skillLevel:"beginner"})).data,onSuccess:e=>{t(e.user)}})}},5041:(t,e,s)=>{"use strict";s.d(e,{n:()=>c});var r=s(2115),n=s(4560),a=s(7165),i=s(5910),u=s(2020),o=class extends i.Q{#t;#e=void 0;#s;#r;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,u.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,u.EN)(e.mutationKey)!==(0,u.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#a()}mutate(t,e){return this.#r=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){let t=this.#s?.state??(0,n.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#a(t){a.jG.batch(()=>{if(this.#r&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,e,s),this.#r.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#r.onError?.(t.error,e,s),this.#r.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#e)})})}},l=s(6715);function c(t,e){let s=(0,l.jE)(e),[n]=r.useState(()=>new o(s,t));r.useEffect(()=>{n.setOptions(t)},[n,t]);let i=r.useSyncExternalStore(r.useCallback(t=>n.subscribe(a.jG.batchCalls(t)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=r.useCallback((t,e)=>{n.mutate(t,e).catch(u.lQ)},[n]);if(i.error&&(0,u.GU)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:c,mutateAsync:i.mutate}}},5695:(t,e,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(e,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(e,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(e,{useSearchParams:function(){return r.useSearchParams}})},5959:(t,e,s)=>{Promise.resolve().then(s.bind(s,6332))},6332:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>l});var r=s(5155),n=s(2115),a=s(3974),i=s(5695),u=s(6874),o=s.n(u);let l=function(){let[t,e]=(0,n.useState)({name:"",email:"",phone:"",age:"",password:""}),s=(0,i.useRouter)(),u=(0,a.L)(),l=s=>{e({...t,[s.target.name]:s.target.value})},c=async e=>{e.preventDefault();try{await u.mutateAsync(t),s.push("/dashboard")}catch(t){console.error("Registration failed:",t)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-200 py-12",children:(0,r.jsx)("div",{className:"max-w-md mx-auto px-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"ثبت‌نام حساب کاربری"}),(0,r.jsx)("p",{className:"text-gray-600",children:"حساب خود را ایجاد کنید"})]}),u.error&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:"خطا در ثبت‌نام. لطفا اطلاعات را بررسی کنید."}),(0,r.jsxs)("form",{onSubmit:c,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نام کاربری *"}),(0,r.jsx)("input",{type:"text",name:"name",required:!0,className:"text-gray-900 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none",value:t.name,onChange:l})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ایمیل *"}),(0,r.jsx)("input",{type:"email",name:"email",required:!0,className:"text-gray-900 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none",value:t.email,onChange:l})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"شماره تماس *"}),(0,r.jsx)("input",{type:"tel",name:"phone",required:!0,className:"text-gray-900 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none",value:t.phone,onChange:l})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سن"}),(0,r.jsx)("input",{type:"number",name:"age",min:"5",max:"80",className:"text-gray-900 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none",value:t.age,onChange:l})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رمز عبور *"}),(0,r.jsx)("input",{type:"password",name:"password",required:!0,className:"text-gray-900 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none",value:t.password,onChange:l})]}),(0,r.jsx)("button",{type:"submit",disabled:u.isLoading,className:"w-full bg-primary hover:bg-primary-dark text-white py-3 px-6 rounded-lg font-semibold transition-colors disabled:opacity-50",children:u.isLoading?"در حال ثبت‌نام...":"ثبت‌نام"})]}),(0,r.jsxs)("div",{className:"text-center mt-8 pt-6 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"قبلاً حساب دارید؟"}),(0,r.jsx)(o(),{href:"/auth/login",className:"text-primary hover:underline font-medium",children:"وارد شوید"})]})]})})})}},7674:(t,e,s)=>{"use strict";s.d(e,{A:()=>o,O:()=>u});var r=s(5155),n=s(2115),a=s(9012);let i=(0,n.createContext)();function u(t){let{children:e}=t,[s,u]=(0,n.useState)(null),[o,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h()},[]);let h=async()=>{try{let t=await a.F.get("/auth/me");u(t.data.user),d(!0)}catch(t){u(null),d(!1)}finally{l(!1)}},m=async t=>{u(t),d(!0)},p=async()=>{try{await a.F.post("/auth/logout"),u(null),d(!1)}catch(t){console.error("Logout error:",t)}};return(0,r.jsx)(i.Provider,{value:{user:s,isAuthenticated:c,isLoading:o,login:m,logout:p,checkAuthStatus:h},children:e})}let o=()=>{let t=(0,n.useContext)(i);if(!t)throw Error("useAuth must be used within AuthProvider");return t}},9012:(t,e,s)=>{"use strict";s.d(e,{F:()=>r});let r=s(3464).A.create({baseURL:"http://localhost:4000",withCredentials:!0})}},t=>{t.O(0,[464,874,144,441,964,358],()=>t(t.s=5959)),_N_E=t.O()}]);