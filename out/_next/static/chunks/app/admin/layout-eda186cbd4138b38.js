(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{4879:(e,t,r)=>{"use strict";r.d(t,{X:()=>l,z:()=>o});var s=r(5155),u=r(2115),a=r(9012);let n=(0,u.createContext)();function l(e){let{children:t}=e,[r,l]=(0,u.useState)(null),[o,i]=(0,u.useState)(!0),[c,d]=(0,u.useState)(!1);(0,u.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await a.F.get("/admin/me");l(e.data.admin),d(!0)}catch(e){l(null),d(!1)}finally{i(!1)}},m=async e=>{l(e),d(!0)},f=async()=>{try{await a.F.post("/admin/logout"),l(null),d(!1)}catch(e){console.error("Admin logout error:",e),l(null),d(!1)}};return(0,s.jsx)(n.Provider,{value:{admin:r,isAuthenticated:c,isLoading:o,login:m,logout:f,checkAdminStatus:h},children:t})}let o=()=>{let e=(0,u.useContext)(n);if(!e)throw Error("useAdmin must be used within AdminProvider");return e}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},6574:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5155),u=r(4879),a=r(7674),n=r(5695),l=r(2115);function o(e){let{children:t}=e,{isAuthenticated:r,isLoading:o}=(0,u.z)(),{isAuthenticated:i,logout:c}=(0,a.A)();return((0,n.useRouter)(),(0,l.useEffect)(()=>{o||!i||r||c()},[r,o,i,c]),o)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"در حال بررسی دسترسی..."})]})}):(0,s.jsx)(s.Fragment,{children:t})}},7674:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,O:()=>l});var s=r(5155),u=r(2115),a=r(9012);let n=(0,u.createContext)();function l(e){let{children:t}=e,[r,l]=(0,u.useState)(null),[o,i]=(0,u.useState)(!0),[c,d]=(0,u.useState)(!1);(0,u.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await a.F.get("/auth/me");l(e.data.user),d(!0)}catch(e){l(null),d(!1)}finally{i(!1)}},m=async e=>{l(e),d(!0)},f=async()=>{try{await a.F.post("/auth/logout"),l(null),d(!1)}catch(e){console.error("Logout error:",e)}};return(0,s.jsx)(n.Provider,{value:{user:r,isAuthenticated:c,isLoading:o,login:m,logout:f,checkAuthStatus:h},children:t})}let o=()=>{let e=(0,u.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},7916:(e,t,r)=>{Promise.resolve().then(r.bind(r,6574))},9012:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});let s=r(3464).A.create({baseURL:(()=>{{let e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?"http://localhost:4000":"https://parsswim-backend-production.up.railway.app"}})(),withCredentials:!0,timeout:15e3});s.interceptors.request.use(e=>e,e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var t,r,s;return(null==(t=e.config)?void 0:t.url)==="/admin/me"||null==(r=e.config)||r.url,null==(s=e.response)||s.status,Promise.reject(e)})}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=7916)),_N_E=e.O()}]);