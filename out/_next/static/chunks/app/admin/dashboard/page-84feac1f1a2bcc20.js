(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{28:(e,t,s)=>{"use strict";s.d(t,{W$:()=>o,QT:()=>i,Dr:()=>d});var a=s(2960),r=s(6715),l=s(5041),n=s(9012);let c={getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.F.get("/products",{params:e})).data.data},delete:async e=>(await n.F.delete("/products/".concat(e))).data,getByCategory:async e=>(await n.F.get("/products",{params:{category:e}})).data.data},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.I)({queryKey:["products",e],queryFn:()=>c.getAll(e)})},d=e=>(0,a.I)({queryKey:["products","category",e],queryFn:()=>c.getByCategory(e)}),o=()=>{let e=(0,r.jE)();return(0,l.n)({mutationFn:c.delete,onSuccess:()=>{e.invalidateQueries({queryKey:["products"]})}})}},1617:(e,t,s)=>{Promise.resolve().then(s.bind(s,7278))},4879:(e,t,s)=>{"use strict";s.d(t,{X:()=>c,z:()=>i});var a=s(5155),r=s(2115),l=s(9012);let n=(0,r.createContext)();function c(e){let{children:t}=e,[s,c]=(0,r.useState)(null),[i,d]=(0,r.useState)(!0),[o,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await l.F.get("/admin/me");c(e.data.admin),u(!0)}catch(e){c(null),u(!1)}finally{d(!1)}},h=async e=>{c(e),u(!0)},m=async()=>{try{await l.F.post("/admin/logout"),c(null),u(!1)}catch(e){console.error("Admin logout error:",e),c(null),u(!1)}};return(0,a.jsx)(n.Provider,{value:{admin:s,isAuthenticated:o,isLoading:i,login:h,logout:m,checkAdminStatus:x},children:t})}let i=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useAdmin must be used within AdminProvider");return e}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7278:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),r=s(2115),l=s(4879),n=s(5695);let c=function(e){let{children:t,redirectTo:s="/admin/login"}=e,{isAuthenticated:c,isLoading:i}=(0,l.z)(),d=(0,n.useRouter)();return((0,r.useEffect)(()=>{i||c||d.push(s)},[c,i,d,s]),i)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"در حال بررسی دسترسی مدیریت..."})]})}):c?t:null},i=function(){let{admin:e,logout:t}=(0,l.z)(),s=async()=>{await t(),window.location.href="/"};return(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"پنل مدیریت"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["سلام ",null==e?void 0:e.username]}),(0,a.jsx)("button",{onClick:s,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"خروج"})]})]})})})},d=function(e){let{activeTab:t,onTabChange:s}=e;return(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>s("classes"),className:"px-6 py-3 rounded-lg font-medium ".concat("classes"===t?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"مدیریت کلاس‌ها"}),(0,a.jsx)("button",{onClick:()=>s("products"),className:"px-6 py-3 rounded-lg font-medium ".concat("products"===t?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"مدیریت محصولات"})]})})};var o=s(8784);let u=function(e){let{classes:t,onEdit:s}=e,r=(0,o.Xl)(),l=async e=>{if(window.confirm("آیا از حذف این کلاس اطمینان دارید؟"))try{await r.mutateAsync(e)}catch(e){alert("خطا در حذف: "+e.message)}};return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"عنوان"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"نوع کلاس"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"قیمت"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"تاریخ"}),(0,a.jsx)("th",{className:"px-4 py-2 text-center",children:"عملیات"})]})}),(0,a.jsx)("tbody",{children:null==t?void 0:t.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"px-4 py-2",children:e.title}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.classType}),(0,a.jsxs)("td",{className:"px-4 py-2",children:[e.price.toLocaleString()," تومان"]}),(0,a.jsx)("td",{className:"px-4 py-2",children:new Date(e.date).toLocaleDateString("fa-IR")}),(0,a.jsxs)("td",{className:"px-4 py-2 text-center",children:[(0,a.jsx)("button",{onClick:()=>s(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm mr-2",children:"ویرایش"}),(0,a.jsx)("button",{onClick:()=>l(e._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm",children:"حذف"})]})]},e._id))})]})})};var x=s(28);let h=function(e){let{products:t,onEdit:s}=e,r=(0,x.W$)(),l=async e=>{if(window.confirm("آیا از حذف این محصول اطمینان دارید؟"))try{await r.mutateAsync(e)}catch(e){alert("خطا در حذف: "+e.message)}};return(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"نام"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"قیمت"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"دسته‌بندی"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right",children:"وضعیت"}),(0,a.jsx)("th",{className:"px-4 py-2 text-center",children:"عملیات"})]})}),(0,a.jsx)("tbody",{children:null==t?void 0:t.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,a.jsxs)("td",{className:"px-4 py-2",children:[e.price.toLocaleString()," تومان"]}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.category}),(0,a.jsx)("td",{className:"px-4 py-2",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.inStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.inStock?"موجود":"ناموجود"})}),(0,a.jsxs)("td",{className:"px-4 py-2 text-center",children:[(0,a.jsx)("button",{onClick:()=>s(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm mr-2",children:"ویرایش"}),(0,a.jsx)("button",{onClick:()=>l(e._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm",children:"حذف"})]})]},e._id))})]})})};function m(){return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-48"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"})]}),(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-16 bg-gray-100 rounded"},e))})]})})}let p=function(){let[e,t]=(0,r.useState)("classes");return(0,a.jsx)(c,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)(i,{}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsx)(d,{activeTab:e,onTabChange:t}),(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(m,{}),children:"classes"===e?(0,a.jsx)(u,{}):(0,a.jsx)(h,{})})]})]})})}},8784:(e,t,s)=>{"use strict";s.d(t,{gR:()=>i,Xl:()=>d});var a=s(2960),r=s(6715),l=s(5041),n=s(9012);let c={getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.F.get("/classes",{params:e})).data.data},delete:async e=>(await n.F.delete("/classes/".concat(e))).data},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.I)({queryKey:["classes",e],queryFn:()=>c.getAll(e)})},d=()=>{let e=(0,r.jE)();return(0,l.n)({mutationFn:c.delete,onSuccess:()=>{e.invalidateQueries({queryKey:["classes"]})}})}},9012:(e,t,s)=>{"use strict";s.d(t,{F:()=>a});let a=s(3464).A.create({baseURL:"https://parsswim-backend-production.up.railway.app",withCredentials:!0,timeout:15e3});a.interceptors.request.use(e=>e,e=>(console.error("\uD83D\uDD25 Request Error:",e),Promise.reject(e))),a.interceptors.response.use(e=>e,e=>{var t,s,a;return console.error("API Error:",(null==(t=e.response)?void 0:t.data)||e.message),(null==(s=e.response)?void 0:s.status)===401&&console.log("Authentication required"),(null==(a=e.response)?void 0:a.status)>=500&&console.error("Server error - please try again later"),Promise.reject(e)})}},e=>{e.O(0,[464,144,736,441,964,358],()=>e(e.s=1617)),_N_E=e.O()}]);